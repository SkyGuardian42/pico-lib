pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
-- [x] select building type
-- [ ] spawn minions
-- [ ] move minions
-- [ ] priority queue
-- [ ] finished buildings

mouse = {
  init = function()
    poke(0x5f2d, 1)
  end,
  pos = function()
    local x,y = stat(32)-1,stat(33)-1
    return stat(32)-1,stat(33)-1
  end,
  button = function()
    return stat(34)
  end
}

entity={
 x=0,
 y=0,
 sprite=1
}

function entity:new(o)
 o = o or {}
 setmetatable(o, self)
 self.__index = self
 add(entities, o)
 return o
end

function placetrees()
	--for()
end

function _init()
 mouse.init()
	bldgs={
 	{"tree"   ,18},
 	{"factory",17},
 	{"house"  ,19}	
	}
	bldg=1
	
end

function _update()
 mx,my = mouse.pos()
 mb = mouse.button()
	mmx=flr(mx/8)*8
	mmy=flr(my/8)*8
	if(mb == 1) then
		mset((mx/8),my/8,bldgs[bldg][2])
	end
	
	--circle through buildings
	if(btnp(‚ùé)) then
		bldg = (bldg%#bldgs+1)
	end
end

function _draw()
  cls()
		map(0,0,0,0)
	 print("x:"..mx.." y:"..my.." b:"..mb,2,2,2)
  print(bldg,0,8)
  
  --draw mouse
  rect(mmx,mmy,mmx+8,mmy+8,8)
  pset(mmx,mmy,2)
  spr(1,mx,my)
end
__gfx__
0000000011111000bbbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000017710000bbbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070017710000bbbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700011171000bbbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700010010000bbbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000000000bbbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000bbbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000bbbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
67777777677777777777777767777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7777777777776657777b3b7777dddd55000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
777777777777665777b3bb3777dccd55000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777777777766577733433777dddd55000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
777777777665665777bf437776666555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7777777776656657777f477776cc6555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7777777776656657777f477776cc6555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
777777777665665777fff47776666555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
67777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77272777772777222777772727777722272727777722277777222777777777777777777777777777777777777777777777777777777777777777777777777777
77272772772777272777772727727727772727777727277277272777777777777777777777777777777777777777777777777777777777777777777777777777
77727777772227222777772227777722272227777722777777272777777777777777777777777777777777777777777777777777777777777777777777777777
77272772772727272777777727727777277727777727277277272777777777777777777777777777777777777777777777777777777777777777777777777777
77272777772227222777772227777722277727777722277777222777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
22777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777777777776777777767777777
72777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777b3b777777777777777777
7277777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777b3bb377777777777777777
72777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777773343377777777777777777
2227777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777bf43777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777f47777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777f47777777777777777777
7777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777fff4777777777777777777
67777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
67777777677777776777777767777777677777776777777777777777677777776777777767777777677777776777777767777777677777776777777767777777
777777777777777777777777777777777777777777777777777b3b77777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777b3bb37777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777334337777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777bf4377777777777777777777777777777777777777777777777777777777777777777777777777
777777777777777777777777777777777777777777777777777f4777777777777777777777777777777777777777777777777777777777777777777777777777
777777777777777777777777777777777777777777777777777f4777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777fff477777777777777777777777777777777777777777777777777777777777777777777777777
67777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
67777777677777777777777767777777677777776777777767777777677777776777777777777777677777776777777767777777677777776777777767777777
7777777777777777777b3b77777777777777777777777777777777777777777777777777777b3b77777777777777777777777777777777777777777777777777
777777777777777777b3bb3777777777777777777777777777777777777777777777777777b3bb37777777777777777777777777777777777777777777777777
77777777777777777733433777777777777777777777777777777777777777777777777777334337777777777777777777777777777777777777777777777777
777777777777777777bf437777777777777777777777777777777777777777777777777777bf4377777777777777777777777777777777777777777777777777
7777777777777777777f4777777777777777777777777777777777777777777777777777777f4777777777777777777777777777777777777777777777777777
7777777777777777777f4777777777777777777777777777777777777777777777777777777f4777777777777777777777777777777777777777777777777777
777777777777777777fff47777777777777777777777777777777777777777777777777777fff477777777777777777777777777777777777777777777777777
67777777677777776777777767777777677777776777777767777777677777772888888887777777677777776777777767777777677777776777777767777777
77777777777777777777777777777777777777777777777777777777777777778777777787777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777778777777787777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777778777777787777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777778777777787777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777778777777787777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777778777111117777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777778777177187777777777777777777777777777777777777777777777777777777
67777777677777776777777767777777677777776777777767777777677777778888177187777777677777776777777767777777677777776777777767777777
77777777777777777777777777777777777777777777777777777777777777777777111717777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777177177777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
67777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
67777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
67777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
67777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
67777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
67777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
67777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
67777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777677777776777777767777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777

__map__
1010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101012101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101210101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010121010101010101210101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100002905723050220501c0501605014050120500a0500a0500905008050080500705005050040500205001050060501805014050000500405004050020500105005050030500105000050033500235002350
