pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
entity={
 x=8,
 y=0,
 sprite=1
}

function entity:new(o)
 o = o or {}
 setmetatable(o, self)
 self.__index = self
 add(entities, o)
 return o
end

function entity:draw()
 spr(self.sprite, self.x, self.y)
end

function entity:update() end
entities = {}

player = entity:new({x=0,y=0,sprite=1})

function player:update()
 if(btn(⬅️)) self.x -= 1 
	if(btn(➡️)) self.x += 1
	if(btn(⬆️)) self.y -= 1
	if(btn(⬇️)) self.y += 1
 if(btn(❎)) offset = 1

end

//add(entities, entity:new({x=10,y=20}))
//entity:new({x=10,y=100})
offset = 2
function screen_shake()
  local fade = .7
  local offset_x=16-rnd(32)
  local offset_y=16-rnd(32)
  offset_x*=offset
  offset_y*=offset
  
  camera(offset_x,offset_y)
  offset*=fade
  if offset<0.05 then
    offset=0
  end
end
entity:new({x=50,y=90,sprite=3})
entity:new({x=57,y=90,sprite=3})
entity:new({x=43,y=90,sprite=3})
entity:new({x=50,y=81,sprite=3})

function _update60()
 foreach(entities,function(e)e:update()end)
end

function _draw()
 cls() 
	screen_shake()
 map(0,0,0,0,128,128)
 foreach(entities,function(e)e:draw()end)
 line(player.x,player.y, entities[3].x+3, entities[3].y+2, 8)
end
__gfx__
000000000076dd009999999900076000000000000000000000000000666666667777777777777777777777770000000000000000000000000000000000000000
0000000007666dd09999999900766d00000000000000000000000000666666667777777777777777777777770000000000000000000000000000000000000000
00700700066666d09999999900d8dd00000000000000000000000000666666667777777777777777777777770000000000000000000000000000000000000000
000770000d8dddd09999999900666d00000000000000000000000000555555557777777777777777777777770000000000000000000000000000000000000000
00077000068877609999999900666d00000000000000000000000000555555557777777777777777777777770000000000000000000000000000000000000000
0070070006666dd09999999900666d00000000000000000000000000555555557777777777777777777777770000000000000000000000000000000000000000
0000000016661dd1999999990016d100000000000000000000000000555555557777777777777777777777770000000000000000000000000000000000000000
00000000100010019999999900100100000000000000000000000000555555557777777777777777777777770000000000000000000000000000000000000000
000000000076dd000000000000000000000000000000000000000000555555557777777777777777777777770000000000000000000000000000000000000000
0000000007666dd00000000000000000000000000000000000000000555555557777777777777777777777770000000000000000000000000000000000000000
00000000066666d00000000000000000000000000000000000000000555555557777777777777777777777770000000000000000000000000000000000000000
000000000d8dddd00000000000000000000000000000000000000000555555557777777777777777777777770000000000000000000000000000000000000000
00000000068877600000000000000000000000000000000000000000555555557777777777777777777777770000000000000000000000000000000000000000
0000000006666dd00000000000000000000000000000000000000000555555557777777777777777777777770000000000000000000000000000000000000000
0000000016661dd10000000000000000000000000000000000000000555555557777777777777777777777770000000000000000000000000000000000000000
00000000000010010000000000000000000000000000000000000000444444447777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000777777777777777777777777777777770000000000000000000000000000000000000000
000000000076dd000000000000000000000000000000000000000000777777777777777777777777777777770000000000000000000000000000000000000000
0000000007666dd00000000000000000000000000000000000000000777777777777777777777777777777770000000000000000000000000000000000000000
00000000066666d00000000000000000000000000000000000000000777777777777777777777777777777770000000000000000000000000000000000000000
000000000d8dddd00000000000000000000000000000000000000000777777777777777777777777777777770000000000000000000000000000000000000000
00000000068877600000000000000000000000000000000000000000777777777777777777777777777777770000000000000000000000000000000000000000
0000000016661dd10000000000000000000000000000000000000000777777777777777777777777777777770000000000000000000000000000000000000000
0000000016661dd10000000000000000000000000000000000000000777777777777777777777777777777770000000000000000000000000000000000000000
00000000100010010000000000000000000000000000000000000000777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000777777777777777777777777777777770000000000000000000000000000000000000000
88888888000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
88888888000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
88888888000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
88888888000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
88888888000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
88888888000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
88888888000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
88888888000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
00000000000000000000000077777777777777777777777777777777777777777777777777777777777777770000000000000000000000000000000000000000
__map__
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020207070702020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020217171702020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020707070200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202021717170200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202070702020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202171702020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020707070707020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202021717171717020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
